!function(){"use strict";Recorder.DTMF_Encode=function(t,n,a,i){for(var s=Math.floor(n*(a||100)/1e3),o=Math.floor(n*(null==i?50:i)/1e3),u=new Int16Array(s+2*o),c=new Int16Array(s+2*o),h=r[t][0],d=r[t][1],k=0;k<s;k++){var f=.3*Math.sin(2*Math.PI*h*(k/n)),l=.3*Math.sin(2*Math.PI*d*(k/n));u[k+o]=32767*Math.max(-1,Math.min(1,f)),c[k+o]=32767*Math.max(-1,Math.min(1,l))}return e(u,0,c,0),u},Recorder.DTMF_EncodeMix=function(e){return new t(e)};var t=function(t){var e=this;for(var r in e.set={duration:100,mute:25,interval:200},t)e.set[r]=t[r];e.keys="",e.idx=0,e.state={keyIdx:-1,skip:0}};t.prototype={add:function(t){this.keys+=t},mix:function(t,r,n){n||(n=0);var a=this,i=a.set,s=[],o=a.state,u=0;t:for(var c=n;c<t.length;c++){var h=t[c],d=a.keys.charAt(a.idx);if(d)for(;d;){if(o.skip){var k=h.length-u;if(k<=o.skip){o.skip-=k,u=0;continue t}u+=o.skip,o.skip=0}var f=o.keyPcm;o.keyIdx==a.idx&&o.cur>=f.length&&(o.keyIdx=-1),o.keyIdx!=a.idx&&(f=Recorder.DTMF_Encode(d,r,i.duration,i.mute),o.keyIdx=a.idx,o.cur=0,o.keyPcm=f,s.push({key:d,data:f}));var l=e(h,u,f,o.cur,!0);if(o.cur=l.cur,u=l.last,l.cur>=f.length&&(a.idx++,d=a.keys.charAt(a.idx),o.skip=Math.floor(r*(i.interval-i.duration-2*i.mute)/1e3)),l.last>=h.length){u=0;continue t}}else o.skip=Math.max(0,o.skip-h.length)}return{newEncodes:s,hasNext:a.idx<a.keys.length}}};var e=function(t,e,r,n,a){for(var i=e,s=n;;i++,s++){if(i>=t.length||s>=r.length)return{last:i,cur:s};a&&(t[i]=0);var o,u=t[i],c=r[s];o=u<0&&c<0?u+c-u*c/-32767:u+c-u*c/32767,t[i]=o}},r={1:[697,1209],2:[697,1336],3:[697,1477],A:[697,1633],4:[770,1209],5:[770,1336],6:[770,1477],B:[770,1633],7:[852,1209],8:[852,1336],9:[852,1477],C:[852,1633],"*":[941,1209],0:[941,1336],"#":[941,1477],D:[941,1633]}}();