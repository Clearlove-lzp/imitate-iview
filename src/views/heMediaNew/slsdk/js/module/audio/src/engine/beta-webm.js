!function(){"use strict";var e="audio/webm",t=window.MediaRecorder&&MediaRecorder.isTypeSupported(e);Recorder.prototype.enc_webm={stable:!1,testmsg:t?"只有比较新的浏览器支持，压缩率和mp3差不多。由于未找到对已有pcm数据进行快速编码的方法，只能按照类似边播放边收听形式把数据导入到MediaRecorder，有几秒就要等几秒。(想接原始录音Stream？我不给，哼!)输出音频虽然可以通过比特率来控制文件大小，但音频文件中的比特率并非设定比特率，采样率由于是我们自己采样的，到这个编码器随他怎么搞":"此浏览器不支持进行webm编码，未实现MediaRecorder"},Recorder.prototype.webm=function(r,a,n){if(t){var o=this.set,c=r.length,i=o.sampleRate,d=Recorder.Ctx,s=d.createMediaStreamDestination();s.channelCount=1;var m=new MediaRecorder(s.stream,{mimeType:e,bitsPerSecond:1e3*o.bitRate}),u=[];m.ondataavailable=function(e){u.push(e.data)},m.onstop=function(t){a(new Blob(u,{type:e}))},m.onerror=function(e){n("转码webm出错："+e.message)},m.start();for(var p=d.createBuffer(1,c,i),f=p.getChannelData(0),b=0;b<c;b++){var l=r[b];l=l<0?l/32768:l/32767,f[b]=l}var w=d.createBufferSource();w.channelCount=1,w.buffer=p,w.connect(s),w.start?w.start():w.noteOn(0),w.onended=function(){m.stop()}}else n("此浏览器不支持把录音转成webm格式")}}();