import{current_time_str}from"../common/helper.js";import{logSize}from"../../disposition.js";let is_save=!1,buffer=[];export function save(){if(is_save&&buffer.length>0){const e=new Blob(buffer,{type:"text/plain"}),o=URL.createObjectURL(e),r=document.createElement("a");r.href=o,r.download="echat.log",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),buffer=[]}}export function close(){log(1,"log close"),save(),is_save=!1}export function log(e,o,r){var n="["+current_time_str()+"][LOG]["+e+"][fun]["+o+"]:"+r+"\r\n";is_save&&(buffer.push(n),buffer.length>logSize()&&save())}export function openLog(){log(1,"log open"),console.log("log open"),is_save=!0}export function closeLog(){log(1,"log open"),console.log("log open"),is_save=!1}export function saveLog(){save()}export function logInfo(e,o,r){null==r&&(r="");var n="["+current_time_str()+"][INFO]["+e+"][fun]["+o+"]:"+r+"\r\n";is_save&&(buffer.push(n),buffer.length>logSize()&&save())}export function warn(e,o,r){var n="["+current_time_str()+"][WARNING]["+e+"][fun]["+o+"]:"+r+"\r\n";is_save&&buffer.push(n)}export function error(e,o,r){var n="["+current_time_str()+"][ERROR]["+e+"][fun]["+o+"]:"+r+"\r\n";is_save&&buffer.push(n)}